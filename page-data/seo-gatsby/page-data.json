{"componentChunkName":"component---src-templates-blog-post-js","path":"/seo-gatsby","result":{"data":{"markdownRemark":{"html":"<p>First off, I'm using such an old of a version of <code>gatsy</code> that I can't currently leverage gatsby's seo features. So I'll need to upgrade to minimum version of <code>gatsby@4.19.0</code>.</p>\n<h3>v1 to v2 upgrade</h3>\n<p>I'll try just setting package.json version to 2.0.0:</p>\n<pre><code>\"dependencies\": {\n  \"gatsby\": \"^2.0.0\",\n}\n</code></pre>\n<p>After running <code>npm i</code>, I needed to update all the peers of gatsby to a higher version too. After doing that, <code>react</code> and <code>react-dom</code> packages were added because in v1 these were bundled inside gatsby but no longer are.</p>\n<p>I was able to finish the install of new packages and render the site successfully using my package script: <code>npm run develop</code></p>\n<p>However, now I see massive layout issues and I will move on to restructuring my react components so that they no longer use the <code>layout.js</code> as a root component.</p>\n<p>After the following steps, which are thankfully documented in the  <a target=\"_blank\" href=\"https://www.gatsbyjs.com/docs/reference/release-notes/migrating-from-v1-to-v2/\">migration guide</a>, I'm up and running again. Had to do the following steps.</p>\n<ol>\n<li>Convert layout's children from render prop to normal prop (required)</li>\n<li>Mv layouts/index.js to src/components/layout.js (optional, but recommended)</li>\n<li>Import then wrap pages with layout component</li>\n<li>Pass history, location, and match props to layout (didn't do this actually)</li>\n<li>Change the query to use StaticQuery (now getting false pos warn about 'maxWidth' in query)</li>\n</ol>\n<h4>v2 Done</h4>\n<p>We made it. Things so far have remained straightforward. Next I'll continue upgrading to v4 now from v2.</p>\n<h3>v2 to v4 upgrade</h3>","frontmatter":{"date":"February 02, 2023","path":"/seo-gatsby","title":"Setting up SEO for a Gatsby blog"}}},"pageContext":{}},"staticQueryHashes":["3868140423"]}