<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.25.2"/><meta data-react-helmet="true" name="google-site-verification" content="5ZNFoMSu47B0gw6uoo6zFERaJU0fE6Sphks60z0AtYc"/><meta data-react-helmet="true" name="description" content="Nathan Phennel&#x27;s Blog | Software, music, innovations and other things worth knowing about."/><meta data-react-helmet="true" name="keywords" content="software testing, software development, javascript, software engineer in test"/><style data-href="/blog/styles.8d8f8586ad2278823a54.css" data-identity="gatsby-global-css">html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{-webkit-text-decoration-skip:objects;background-color:transparent}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{background-color:inherit;font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{box-sizing:border-box;font:112.5%/1.45em sans-serif;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{word-wrap:break-word;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt";color:rgba(0,0,0,.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-kerning:normal;font-weight:400}img{margin:0 0 1.45rem;max-width:100%;padding:0}h1{font-size:2.25rem}h1,h2{color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h2{font-size:1.62671rem}h3{font-size:1.38316rem;margin:2rem 0 1.45rem}h3,h4{color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;line-height:1.1;padding:0;text-rendering:optimizeLegibility}h4{font-size:1rem;margin:2rem 0 .5rem}h5{font-size:.85028rem}h5,h6{color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h6{font-size:.78405rem}hgroup{margin:0 0 1.45rem;padding:0}ol,ul{list-style-image:none;list-style-position:outside;margin:0 0 1.45rem 1.45rem;padding:0}dd,dl{margin:0 0 1.45rem}dd,dl,p{padding:0}p{margin-left:0;margin-right:0;margin-top:0}figure{padding:0}figure,pre{margin:0 0 1.45rem}pre{word-wrap:normal;background:rgba(0,0,0,.04);border-radius:3px;font-size:.85rem;height:auto;line-height:1.42;max-width:60vw;min-height:50px;overflow:auto;padding:.45rem;resize:vertical}table{border-collapse:collapse;font-size:1rem;line-height:1.45rem;width:100%}fieldset,table{margin:0 0 1.45rem;padding:0}blockquote{margin:0 1.45rem 1.45rem;padding:0}form,iframe,noscript{margin:0 0 1.45rem;padding:0}hr{background:rgba(0,0,0,.2);border:none;height:1px;margin:0 0 calc(1.45rem - 1px);padding:0}address{margin:0 0 1.45rem;padding:0}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-bottom:.725rem;margin-left:1.45rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";border-bottom:1px solid rgba(0,0,0,.12);padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{content:" ";letter-spacing:-.2em}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:72%}code{line-break:"anywhere"}img{width:70%}}*{background:#f8f8f8;color:#424242}body,html{height:100%}body{-webkit-animation:fadein 2s;animation:fadein 2s;overflow-x:hidden}h1{font-size:1.5rem;line-height:1.4rem}div,p{font-size:16px}header{background:#161415;overflow:hidden;position:relative;text-align:center;width:100%}#nav-wrap a,#nav-wrap li,#nav-wrap ul{line-height:1em;margin:0;outline:none;padding:0}#nav-wrap{font:12px opensans-bold,sans-serif;letter-spacing:2.5px;margin:0 auto;text-transform:uppercase;width:100%;z-index:100}.opaque{background-color:#333}#nav-wrap>a.mobileButton{display:none}ul#nav li{display:inline-flex;padding:.95em}ul#nav li a{display:inline-block;line-height:32px;text-align:left;text-decoration:none}ul#nav li:hover{background-color:rgba(0,0,0,.178)!important}ul#nav li:active{background-color:rgba(0,0,0,.267)!important}ul#nav li.current a{color:#813f0e}.sidebar{align-items:center;-webkit-animation:fadeinSidebar 5s cubic-bezier(.6,-.28,.735,.035);animation:fadeinSidebar 5s cubic-bezier(.6,-.28,.735,.035);border-color:#ccc;box-shadow:4px 1px 12px 3px hsla(0,0%,100%,.08);display:flex;flex-direction:column;font-size:13px;margin-bottom:50px;overflow:hidden;padding:.25em;position:-webkit-sticky;position:sticky;top:90px}@-webkit-keyframes fadein{0%{opacity:0}to{opacity:1}}@keyframes fadein{0%{opacity:0}to{opacity:1}}@-webkit-keyframes fadeinSidebar{0%{opacity:0;-webkit-transform:translateX(100%);transform:translateX(100%)}to{opacity:1;-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes fadeinSidebar{0%{opacity:0;-webkit-transform:translateX(100%);transform:translateX(100%)}to{opacity:1;-webkit-transform:translateX(0);transform:translateX(0)}}.breadcrumbs{align-items:baseline;display:flex;flex-direction:row;height:1.1em;justify-content:flex-start;margin-bottom:16px;overflow:hidden;text-transform:uppercase;width:100%}.breadcrumbLink{color:rgba(189,91,26,.74);font-kerning:auto;font-size:.75em;font-weight:200;padding-right:2px;text-decoration:none}.breadcrumbLink:hover{text-decoration:underline}.breadcrumbLink-separator{font-size:.75em;font-weight:200;margin:0 4px}.css-animation-container{margin:30px;padding:50px}.css-animation{-webkit-animation-delay:0;animation-delay:0;-webkit-animation-direction:alternate;animation-direction:alternate;-webkit-animation-duration:1.5s;animation-duration:1.5s;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:stretch;animation-name:stretch;-webkit-animation-play-state:running;animation-play-state:running;-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out;background-color:purple;height:150px;margin:0 auto;width:150px}@-webkit-keyframes stretch{0%{background-color:purple;border-radius:100%;-webkit-transform:scale(.3);transform:scale(.3)}50%{background-color:orange}to{background-color:#f0f8ff;-webkit-transform:scale(1.5);transform:scale(1.5)}}@keyframes stretch{0%{background-color:purple;border-radius:100%;-webkit-transform:scale(.3);transform:scale(.3)}50%{background-color:orange}to{background-color:#f0f8ff;-webkit-transform:scale(1.5);transform:scale(1.5)}}.slide-in-text{-webkit-animation-direction:alternate;animation-direction:alternate;-webkit-animation-duration:3s;animation-duration:3s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:slidein;animation-name:slidein;overflow:hidden}@-webkit-keyframes slidein{0%{margin-left:100%;width:300%}to{margin-left:0;width:100%}}@keyframes slidein{0%{margin-left:100%;width:300%}to{margin-left:0;width:100%}}.blogPost{margin-bottom:2em;max-width:85vw}.blogPostPreview{background-color:#ededef;box-shadow:1px 2px 3px #999;display:flex;margin-bottom:1rem;padding-bottom:.5em;padding-right:2px;padding-top:1em;text-decoration:none}.blogPostPreview *{background-color:inherit}.blogPostPreview img{height:140px;margin:18px;padding:0;width:140px}.blogPostPreview a{line-height:1em}h1>*{font-size:1.2rem;text-decoration-line:none}h2{font-size:1.4rem!important;font-weight:300!important;margin-top:32px}h6{font-size:.8rem!important;font-weight:100!important}@media only screen and (max-width:480px){html{font-size:75%;line-height:1.7em}.blogPostPreview{flex-direction:column;padding:16px}.blogPostPreview h1{margin-bottom:6px}.blogPostPreview p{font-size:85%}.blogPostPreview img{align-self:center;height:100px;margin:4px;padding-bottom:4px;width:100px}}.note{background-color:#e6e6fa;border-radius:4px;margin-bottom:1em;margin-left:1em;padding:14px;width:80%}</style><title data-react-helmet="true">Setting up SEO for a Gatsby blog</title><link rel="sitemap" type="application/xml" href="/blog/sitemap/sitemap-index.xml"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="background:#f5f5f5;margin-bottom:3rem;border-bottom:2px solid #e6e6e6;box-shadow:6px 2px 24px 8px rgba(0,0,0,.08);position:sticky;top:0"><header id="home"><nav id="nav-wrap"><a class="mobileButton" href="#nav-wrap" title="Show navigation">Show navigation</a><a class="mobileButton" href="#home" title="Hide navigation">Hide navigation</a><ul id="nav" class="nav"><li><a href="https://enphnt.github.io">Home</a></li><li><a href="https://enphnt.github.io/#about">About</a></li><li><a href="https://enphnt.github.io/#resume">Resume</a></li><li><a href="https://enphnt.github.io/#portfolio">Works</a></li><li><a href="https://enphnt.github.io/#testimonials">Testimonials</a></li><li class="current"><a href="https://enphnt.github.io/blog">Blog</a></li><li><a href="https://enphnt.github.io/#contact">Contact</a></li></ul></nav></header></div><div style="margin:0 auto;max-width:1500px;display:flex;flex-direction:row;justify-content:space-between;height:100%"><div style="margin:0 auto;max-width:980px;display:flex;flex-direction:column;justify-content:space-between;height:100%;padding:0 25px"><div style="flex:1"><div><div class="blogPost"><div class="breadcrumbs"><a class="breadcrumbLink" href="/blog/">Home</a><div class="breadcrumbLink-separator">&gt;</div><a aria-current="page" class="breadcrumbLink" href="/blog/seo-gatsby">Setting up SEO for a Gatsby blog</a></div><h5>Last Updated: <!-- -->February 03, 2023</h5><h1>Setting up SEO for a Gatsby blog</h1><div><p>Today, I'll be following along the <a href="https://www.gatsbyjs.com/docs/how-to/adding-common-features/adding-seo-component/#seo-with-gatsby">Gatsby SEO guide</a>. I'll be following these steps roughly:</p>
<ol>
<li>Gauging my current situation</li>
<li>Adding siteMetadata</li>
<li>Create a sitemap generation process</li>
<li>Create robots.txt generation process</li>
</ol>
<h3>Gauging my current situation</h3>
<p>After these steps, I'll do some testing to see if my SEO has improved using google.</p>
<p>Unfortunately, this blog is yet to be indexed. Instead of waiting i'll use the google search console to verify the site.</p>
<p>To use search console, I've got to add a meta tag to the site for verification purposes.</p>
<p>After deploying the blog which now contains the verification tag, I was successfully able to to verify ownership. Now, google will spend some time crawling the site here at /blog and indexing all the things.</p>
<p>I'll check the results when I look at this again in the next few days.</p>
<p>...next day, I'm noticing the same issues with Search Console, says more time is needed essentially. In the meantime I'll continue on my optimization journey.</p>
<h3>Adding siteMetadata</h3>
<p>This was simple. In the <code>gatsby-config.js</code>, I just ensure the following properties were set:</p>
<pre><code>  siteMetadata: {
    title: "Nathan Phennel's Blog | Software, music, innovations and other things worth knowing about.",
    description: "Notes and memos on the things that cross my path.",
    siteUrl: `https://enphnt.github.io/blog/`,
    image: "/images/profile-pic.png"
  },
</code></pre>
<p>After this stage, I tested google and still no changes were detected. I continued to optimize in other ways.</p>
<h3>Create a sitemap generation process</h3>
<p>So one major issue I face is that googlebot doesn't seem to know how to crawl the site. I understand that if provided a sitemap.xml then the bot will have a much better chance of successfully crawling. In fact, sitemaps are also great to prevent crawling of certain areas that you wouldn't want indexed, like 404 pages, paths with hashes for individual user sessions, etc.</p>
<p>So I grabbed the <code>gatsby-plugin-sitemap</code> and was able to configure with minimal configuration. Essentially, I had to leverage the <code>serialize</code> option so that I could append the /blog/ part of the path to all my pages. This is due to the way github pages hosts subproject. This blog is a subproject or subfolder of my main github-pages project. So by default the paths were defaulting to <code>enphnt.github.io/post-name</code> whereas after using the <code>serialize</code> option, I was able to set each entry to be <code>enphnt.github.io/blog/post-name</code>.</p>
<p>I updated the build and deployed.</p>
<p>Next, I went back to Search Console to see if anything had changed. Nothing. This time, I decided to do 2 things:</p>
<ol>
<li>request indexation - Its just a click to request it. Still pending of course...</li>
<li>explicitly tell google where to find the sitemap. This is done in the 'sitemap' section of Search Console.</li>
</ol>
<p>After this, I was actually able to see that googlebot was assisted finally (note, currently 12 posts on this blog):</p>
<div style="text-align:center">
  <img src="images/sitemap.png" alt="sitemap-seen-by-googlebot" width="400px">
</div>
<p>This is great. Now, when I run a new production build of the site, a new sitemap.xml is generated too so that all new content is included in the sitemap.</p>
<p>I didn't tweak the sitemap attributes much. Just gave the homepage, or /blog/, path a slightly higher priority. I set the changefreq to be monthly because realistically that's what I've maintained at best so far.</p>
<p>You can access the sitemap here by the way: <a href="https://enphnt.github.io/blog/sitemap/sitemap-0.xml">https://enphnt.github.io/blog/sitemap/sitemap-0.xml</a></p>
<p>Next to the robots.txt file...</p>
<h3>Create robots.txt generation process</h3>
<p>Very similar to the sitemap plugin, I found one got robots, <code>gatsby-plugin-robots-txt</code>. I included the plugin middleware and proceed to review the generated robots.txt file.</p>
<p>Unfortunately, I face the same issues as before with the github-pages subproject, aka /blob/ in the path.</p>
<p>Original output point the bots to go here for the sitemap:
<code>Sitemap: https://enphnt.github.io/blog/sitemap/sitemap-0.xml</code></p>
<p>To ensure this was created correctly, I simply hardcoded the locations of things:</p>
<pre><code>options:
    {
        host: 'https://enphnt.github.io/blog', // truncated in the robots.txt result. not sure if it matters
        sitemap: 'https://enphnt.github.io/blog/sitemap/sitemap-0.xml',
        policy: [{ userAgent: '*', allow: '/' }],
    }
</code></pre>
<p>After this, I was able to see that indeed, the file was in place, waiting for future bot visits:
<a href="https://enphnt.github.io/blog/robots.txt">https://enphnt.github.io/blog/robots.txt</a></p>
<p>Now, in future production builds of the site, the robots.txt will be generated and made available for all those friendly crawlers.</p>
<h3>Testing</h3>
<p>It was great to get the feedback immediately from Search Console when I popped in the sitemap.xml. However, still I'm unable to see the site in google search itself.</p>
<p>I'll continue waiting and check back soon....</p>
<h5>Update after a few days</h5>
<p>I've noticed that still the child pages of the site are not being detected by google search. I've decided to address this by registing ownership of the main site at <a href="https://enphnt.github.io">https://enphnt.github.io</a>.</p>
<p>I used the meta tag option to verify ownership successfully.</p>
<p>I then actually requested indexing on the 3 most recent blog posts urls themselves.</p>
<p>In a few days, hopefully I will start to see the bots crawl all the articles successfully.</p>
<h3>Conclusion</h3>
<p>...tbd</p></div><a href="/blog/">Go back to the homepage</a></div></div></div><div style="flex:0.66"><div class="sidebar"><strong style="text-align:center">Hi, I&#x27;m Nathan ¬† üëãüèª</strong><img style="height:190px;width:190px;object-fit:contain;border-radius:19px;padding:10px;margin-bottom:0" src="images/profile-pic.png" alt="profile-pic"/><div style="padding:0 10px"><p style="font-size:13px">I use this space for writing down things I want to remember for future reference.</p><strong style="font-size:13px">Who am I?</strong><p style="font-size:13px">From 9-5, I develop software but after hours I&#x27;m playing guitar, drums or keys as a DIY producer. I&#x27;m always learning about random things and some end up here.</p></div></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/seo-gatsby";window.___webpackCompilationHash="3d24d9b2ce0cce560c69";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-f4f4dba27ef969e21f01.js"],"app":["/app-128af757a42d250aec76.js"],"component---src-pages-404-js":["/component---src-pages-404-js-d7717b325b212d8362e4.js"],"component---src-pages-index-js":["/component---src-pages-index-js-91ff0def6936d62f084f.js"],"component---src-pages-page-2-js":["/component---src-pages-page-2-js-606bf815079a8aa8c41b.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-6709426a8102611ccda9.js"]};/*]]>*/</script><script src="/blog/polyfill-f4f4dba27ef969e21f01.js" nomodule=""></script><script src="/blog/app-128af757a42d250aec76.js" async=""></script><script src="/blog/framework-3b1403edac323cf431ea.js" async=""></script><script src="/blog/webpack-runtime-c8ad35aefc1b0b2ff7a4.js" async=""></script></body></html>